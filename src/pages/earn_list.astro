---
import Layout from "../layouts/MainLayout.astro";
import List from "../components/earn/List.astro";
import { productionData } from "../data/earn_investments";
import { InvestmentStatus } from "../types";

const checkStatusCompleted = (status: string) =>
  status === InvestmentStatus.Completed || status === InvestmentStatus.Expired;
const completedInvestments = productionData.data.filter(({ status }) =>
  checkStatusCompleted(status)
);
const ongoingInvestments = productionData.data
  .filter(({ status }) => !checkStatusCompleted(status))
  .sort((a, b) => (new Date(a.dateEnd) > new Date(b.dateEnd) ? 1 : -1));
---

<Layout title="Earn List">
  <a href="/earn">DATA</a>
  <List data={ongoingInvestments} title="Ongoing" />
  <List data={completedInvestments} title="Completed" />
</Layout>
