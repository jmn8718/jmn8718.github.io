---
import Layout from "../layouts/MainLayout.astro";
import List from "../components/earn/List.astro";
import Header from "../components/earn/Header.astro";
import { investments } from "../data";
import { InvestmentStatus } from "../types";

const checkStatusCompleted = (status: string) =>
  status === InvestmentStatus.Completed || status === InvestmentStatus.Expired;
const completedInvestments = investments.data.filter(({ status }) =>
  checkStatusCompleted(status)
);
const ongoingInvestments = investments.data
  .filter(({ status }) => !checkStatusCompleted(status))
  .sort((a, b) => (new Date(a.dateEnd) > new Date(b.dateEnd) ? 1 : -1));
---

<Layout title="Earn List">
  <Header />
  <List data={ongoingInvestments} title="Ongoing" />
  <List data={completedInvestments} title="Completed" />
</Layout>
